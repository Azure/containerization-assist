{
    "name": "Container Kit Development",
    "image": "mcr.microsoft.com/devcontainers/go:1.24-bookworm",
    
    "features": {
        "ghcr.io/devcontainers/features/docker-in-docker:2": {
            "version": "latest",
            "enableNonRootDocker": "true"
        },
        "ghcr.io/devcontainers/features/kubectl-helm-minikube:1": {
            "version": "latest",
            "helm": "latest",
            "minikube": "none"
        }
    },
    
    "customizations": {
        "vscode": {
            "extensions": [
                "golang.go",
                "ms-vscode.vscode-json",
                "redhat.vscode-yaml",
                "ms-kubernetes-tools.vscode-kubernetes-tools",
                "ms-vscode.makefile-tools",
                "github.copilot",
                "github.copilot-chat"
            ],
            "settings": {
                "go.useLanguageServer": true,
                "go.lintTool": "golangci-lint",
                "go.lintOnSave": "package",
                "go.formatTool": "goimports",
                "go.testOnSave": false,
                "editor.formatOnSave": true,
                "editor.codeActionsOnSave": {
                    "source.organizeImports": "explicit"
                }
            }
        }
    },
    
    "postCreateCommand": ".devcontainer/setup.sh",
    
    "mounts": [
        "source=/var/run/docker.sock,target=/var/run/docker.sock,type=bind"
    ],
    
    "remoteUser": "vscode",
    
    "workspaceFolder": "/workspaces/container-copilot",
    
    "forwardPorts": [8080, 3000, 9090],
    
    "portsAttributes": {
        "8080": {
            "label": "MCP Server HTTP",
            "onAutoForward": "notify"
        },
        "3000": {
            "label": "Development Server",
            "onAutoForward": "silent"
        },
        "9090": {
            "label": "Metrics/Prometheus",
            "onAutoForward": "silent"
        }
    }
}