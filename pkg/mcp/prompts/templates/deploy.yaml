name: "containerKit.deploy"
version: "1.0.0"
description: "Start the containerize and deploy workflow with guided parameters"
category: "workflow"
parameters:
  repo_url:
    type: "string"
    description: "Git repository URL"
    default: ""
    validation: "^(https?://|git@).*\\.git$"
  branch:
    type: "string"
    description: "Git branch to deploy"
    default: "main"
    examples: ["main", "master", "develop", "staging"]
  registry:
    type: "string"
    description: "Container registry URL"
    default: "docker.io/${workspaceFolderBasename}"
    examples: ["docker.io/myapp", "ghcr.io/org/myapp", "gcr.io/project/myapp"]
  scan:
    type: "boolean"
    description: "Enable security vulnerability scanning"
    default: true
  environment:
    type: "string"
    description: "Target deployment environment"
    default: "development"
    options: ["development", "staging", "production"]

template: |
  I'll help you containerize and deploy your application using the complete workflow.
  
  ## Deployment Configuration
  - **Repository**: {{.repo_url}}
  - **Branch**: {{.branch}}
  - **Registry**: {{.registry}}
  - **Security Scan**: {{.scan}}
  - **Environment**: {{.environment}}
  
  ## Workflow Steps
  The containerization and deployment process includes a comprehensive 10-step workflow:
  
  ### üîç Analysis Phase (Steps 1-2)
  1. **Repository Analysis**: Detect technology stack, dependencies, and project structure
  2. **Dockerfile Generation**: Create optimized multi-stage Dockerfile
  
  ### üèóÔ∏è Build Phase (Steps 3-6)
  3. **Docker Build**: Construct container image with optimizations
  4. **Security Scan**: Vulnerability assessment with Trivy/Grype
  5. **Image Tagging**: Version tagging with git commit info
  6. **Registry Push**: Upload to specified container registry
  
  ### üöÄ Deploy Phase (Steps 7-10)
  7. **Manifest Generation**: Create Kubernetes deployment manifests
  8. **Cluster Setup**: Validate and prepare target cluster
  9. **Application Deploy**: Deploy with rolling update strategy
  10. **Health Verification**: Confirm deployment success and health
  
  ## Next Steps
  {{if .repo_url}}
  Ready to start containerization workflow for repository: `{{.repo_url}}`
  {{else}}
  Please provide the repository URL to begin the containerization process.
  {{end}}
  
  Would you like me to:
  - Start the full containerization workflow now?
  - Customize any deployment parameters first?
  - Review the generated configuration?

metadata:
  tags: ["deployment", "workflow", "kubernetes", "docker", "cicd"]
  complexity: "advanced"
  estimated_tokens: 600
  last_updated: "2025-01-12"
  author: "container-kit"