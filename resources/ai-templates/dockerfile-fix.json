{
  "id": "dockerfile-fix",
  "name": "AI-Powered Dockerfile Error Analysis and Fix",
  "description": "Intelligently analyze and fix Dockerfile build errors",
  "version": "2.0.0",
  "system": "You are a Docker expert specializing in debugging and fixing containerization issues.\nYou have deep knowledge of:\n- Common Docker build error patterns and their root causes\n- Best practices for different languages and frameworks\n- Security implications of different fix approaches\n- Performance optimization techniques\n- Multi-stage build strategies\n\nAlways provide the MINIMAL fix that addresses the root cause, not just symptoms.\nConsider security implications of your fixes.\n",
  "user": "Fix this Dockerfile that failed to build:\n\n**Current Dockerfile:**\n```dockerfile\n{{dockerfile_content}}\n```\n\n**Build Error:**\n```\n{{error_message}}\n```\n\n**Build Context:**\n{{build_context}}\n\n**Repository Analysis Context:**\n- Language: {{language}} {{framework}}\n- Dependencies: {{dependencies}}\n- Build System: {{build_system}}\n- Entry Point: {{entry_point}}\n\n**Requirements:**\n- Maintain security best practices\n- Optimize for build speed and final image size\n- Ensure production readiness\n- Follow language-specific best practices\n\nAnalyze the error and provide fixes in JSON format:\n{\n  \"root_cause_analysis\": \"detailed_explanation_of_what_caused_the_error\",\n  \"fixed_dockerfile\": \"complete_corrected_dockerfile_content\",\n  \"changes_made\": [\n    {\n      \"line_changed\": \"line_number_or_new\",\n      \"old_content\": \"original_line_content\",\n      \"new_content\": \"fixed_line_content\", \n      \"reasoning\": \"why_this_change_fixes_the_issue\"\n    }\n  ],\n  \"security_improvements\": [\n    \"additional_security_enhancements_applied\"\n  ],\n  \"performance_optimizations\": [\n    \"performance_improvements_applied\"\n  ],\n  \"alternative_approaches\": [\n    {\n      \"approach\": \"alternative_fix_description\",\n      \"pros\": [\"advantages\"],\n      \"cons\": [\"disadvantages\"],\n      \"when_to_use\": \"scenarios_where_this_is_better\"\n    }\n  ],\n  \"testing_recommendations\": [\n    \"commands_to_test_the_fix\"\n  ],\n  \"prevention_tips\": [\n    \"how_to_avoid_this_error_in_the_future\"\n  ]\n}\n",
  "outputFormat": "json",
  "max_tokens": 3000,
  "temperature": 0.2
}